@startuml SEQ05_XoaTaiKhoan

    title: Xóa tài khoản

    skin rose
    scale 2
    skinparam sequenceMessageAlign center
    hide footbox

    autonumber

    actor "User" as user
    boundary "User Interface\nClass" as ui
    control "User Controller\nClass" as ctr
    control "User Service\nClass" as userSv
    control "Album \nService" as albumSv
    control "Trip \nService" as tripSv
    control "Trip place \nService" as tripPlaceSv
    entity "Album \nClass" as albumEnt
    entity "Trip \nClass" as tripEnt
    entity "Trip place \nClass" as tripPlaceEnt
    entity "User \nClass" as userEnt

    user -> ui: Truy cập vào màn hình \n "Cá nhân" và chọn xóa tài khoản
    ui ++
    ui --> user: Hiện thông báo xác nhận xóa tài khoản
    alt Người dùng không xác \n nhận xóa tài khoản
        user -> ui: Nhấn hủy bỏ
        ui --> user: Đóng thông báo
    else Người dùng xác nhận xóa tài khoản

        autonumber 3
        
        user -> ui: Nhấn xác nhận xóa tài khoản
        ui -> ctr: Gửi yêu cầu xóa tài khoản
        ctr ++
        ctr -> userSv: Gửi yêu cầu xóa tài khoản
        userSv ++
        userSv -> albumSv: Gửi yêu cầu xóa album \n của tài khoản
        albumSv ++
        albumSv -> albumEnt: Xóa album của tài khoản
        albumEnt ++
        albumEnt --> albumSv: Trả về thông báo xóa album thành công
        albumEnt --
        albumSv --> userSv: Trả về thông báo xóa album thành công
        albumSv --
        userSv -> tripSv: Gửi yêu cầu xóa chuyến đi \n của tài khoản
        tripSv ++
        tripSv -> tripPlaceSv: Gửi yêu cầu xóa địa điểm \n của chuyến đi
        tripPlaceSv ++
        tripPlaceSv -> tripPlaceEnt: Xóa địa điểm của chuyến đi
        tripPlaceEnt ++
        tripPlaceEnt --> tripPlaceSv: Trả về thông báo xóa địa điểm thành công
        tripPlaceEnt --
        tripPlaceSv --> tripSv: Trả về thông báo xóa địa điểm thành công
        tripPlaceSv --
        tripSv -> tripEnt: Xóa chuyến đi của tài khoản
        tripEnt ++
        tripEnt --> tripSv: Trả về thông báo xóa chuyến đi thành công
        tripEnt --
        tripSv --> userSv: Trả về thông báo xóa chuyến đi thành công
        tripSv --
        userSv -> userEnt: Xóa tài khoản
        userEnt ++
        userEnt --> userSv: Trả về thông báo xóa tài khoản thành công
        userEnt --
        userSv --> ctr: Trả về thông báo xóa tài khoản thành công
        userSv --
        ctr --> ui: Trả về thông báo xóa tài khoản thành công
        ctr--
        ui --> user: Hiển thị thông báo xóa tài khoản thành công\n và chuyển hướng đến trang đăng nhập
        end
@enduml