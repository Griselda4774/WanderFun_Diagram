@startuml ClassDiagram

skin rose
scale 2

class AdministrativeRegion {
    id: Long
    name: String
    nameEn: String
    codeName: String
    codeNameEn: String

}

class AdministrativeUnit {
    id: Long
    fullName: String
    fullNameEn: String
    shortName: String
    shortNameEn: String
    codeName: String
    codeNameEn: String
}

class Province {
    - code: String
    - name: String
    - nameEn: String
    - fullName: String
    - fullNameEn: String
    - codeName: String
    - regionId: Long
    - unitId: Long
}

class District {
    - code: String
    - name: String
    - nameEn: String
    - fullName: String
    - fullNameEn: String
    - codeName: String
    - unitId: Long
    - provinceCode: String
}

class Ward {
    - code: String
    - name: String
    - nameEn: String
    - fullName: String
    - fullNameEn: String
    - codeName: String
    - unitId: Long
    - districtCode: String
}

class ProvinceDetail {
    - provinceCode: String
    - longitude: double
    - latitude: double
    - area_km2: double
    - description: String
    - bestTimeToVisit: String
    - festivals: String
    - localTransport: String
    - localFood: String
    - howToGetThere: String
}

class Address {
    - id: Long
    - province: Province
    - district: District
    - ward: Ward
    - street: String
    - targetType: AddressTargetType
    - targetId: Long
}

enum AddressTargetType {
    USER,
    PLACE,
}

class Image {
    - id: Long
    - imageUrl: String
    - imagePublicId: String
    - targetType: ImageType
    - targetId: Long
}

enum ImageTargetType {
    ALBUM,
    PLACE_IMAGE,
    PLACE_ICON,
    PLACE_COVER,
    FEEDBACK,
    POST,
    USER_AVATAR,
    SECTION,
}

class Album {
    - id: Long
    - name: String
    - description: String
    - updatedAt: LocalTime
    - place: Place
    - userId: Long
}

class User {
    - id: Long
    - role: UserRole
    - email: String
    - password: String
    - firstName: String
    - lastName: String
    - isVerified: boolean
    - isCreatedProfile: boolean
    - avatarImage: Image
    - dateOfBirth: Date
    - gender: String
    - phoneNumber: String
    - point: int
    - address: Address
    - listFavoritePlaces: List<FavouritePlace>
}

class Place {
    - id: Long
    - longitude: double
    - latitude: double
    - address: Address
    - name: String
    - iconImage: Image
    - coverImage: Image
    - placeDetail: PlaceDetail
}

class PlaceDetail {
    - id: Long
    - description: String
    - checkInPoint: int
    - checkInRange: float
    - category: PlaceCategory
    - timeOpen: LocalTime
    - timeClose: LocalTime
    - isOpen: boolean
    - bestTimeToVisit: String
    - priceRangeTop: int
    - priceRangeBottom: int
    - isVerified: boolean
    - alternativeName: String
    - operator: String
    - link: String
    - rating: float
    - totalRating: int
    - totalFeedback: int
}

class Feedback {
    - id: Long
    - user: User
    - rating: float
    - comment: String
    - createAt: LocalTime
    - placeDetailId: Long
}

class Section {
    - id: Long
    - title: String
    - content: String
    - image: Image
    - placeDetailId: Long
}

class FavouritePlace {
    - id: Long
    - placeId: Long
    - userId: Long
}

class Trip {
    - id: Long
    - name: String
    - startTime: Date
    - endTime: Date
    - authorId: Long
    - listTripPlaces: List<TripPlace>
}

class TripPlace {
    - id: Long
    - place: Place
    - tripId: Long
    - startTime: Date
    - endTime: Date
}

enum UserRole {
    ADMIN
    USER
}

enum PlaceCategory {
    HOTEL
    RESTAURANT
    MUSEUM
    PARK
    SHOPPING
    ENTERTAINMENT
    OTHER
}

class RefreshToken {
    - id: Long
    - token: String
    - userId: Long
}

class Post {
    - id: Long
    - user: User
    - content: String
    - createAt: LocalTime
    - isTripShare: boolean
    - trip: Trip
    - like: int
}

class Comment {
    - id: Long
    - user: User
    - content: String
    - createAt: LocalTime
    - postId: Long
    - parentId: Long
    - like: int
}

class Like {
    - id: Long
    - user: User
    - targetId: Long
    - targetType: LikeTargetType
}

enum LikeTargetType {
    POST,
    COMMENT,
}

class CheckIn {
    - id: Long
    - userId: Long
    - place: Place
    - checkInTime: LocalTime
}

User -right- Trip
User -left- Album
User -up- FavouritePlace
User -down- RefreshToken
User -down- Post
User -down- Comment
User -up- CheckIn
User -down- Like
User -up- UserRole

' Album -left- AlbumImage
' Album -up- Place

Trip -right- TripPlace

Place -down- Feedback
Place -up- PlaceDetail
Place -up- PlaceCategory
' Place -up- PlaceImage
Place -down- FavouritePlace
Place -down- CheckIn
Place -down- TripPlace

PlaceDetail -right- Section


' Feedback -up- FeedbackImage
Feedback -right- User

Province -up- AdministrativeUnit
Province -up- AdministrativeRegion
Province -left- ProvinceDetail

District -up- AdministrativeUnit
District -left- Province

Ward -up- AdministrativeUnit
Ward -left- District

Post -down- Comment
' Post -up- Like
Post -up- Trip

' Comment -up- Like

Address -up- Province
Address -up- District
Address -up- Ward
Address -down- AddressTargetType

Image -up- ImageTargetType

Like -up- LikeTargetType

@enduml